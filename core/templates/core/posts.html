{% extends 'base.html' %}

{% block extera_style %}
    body,h1,h2,h3,h4,h5 {font-family: "Raleway", sans-serif}
    .w3-button-custom {
      border-color: #4CAF50;
      color: #4CAF50;
    }
    .w3-button-custom:hover {
      background-color: #4CAF50;
      color: white;
    }
    .search-container {
      display: flex;
      justify-content: center;
      gap: 20px; /* فاصله بیشتر بین فیلد جستجو و دکمه */
      margin-bottom: 32px;
      max-width: 650px;
      margin-left: auto;
      margin-right: auto;
    }
    .search-input {
      flex: 1;
      padding: 8px;
      border: 2px solid #ccc;
      border-radius: 0px;
      font-size: 14px;
    }
    .search-button {
      padding: 8px 12px;
      border: none;
      border-radius: 0px;
      cursor: pointer;
      font-size: 14px;
    }
    .search-button:hover {
      background-color: #45a049;
    }

    .blog-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      padding: 20px;
    }

    @media (max-width: 768px) {
      .blog-grid {
        grid-template-columns: repeat(1, 1fr);
      }
    }

{% endblock %}

{% block content %}
<div class="w3-light-grey">

<div class="w3-content" style="max-width:1400px">

  <!-- Header -->
  <header class="w3-container w3-center w3-padding-32">
    <h1><b>FREE WORDS</b></h1>
    <p>Welcome to the blog of <span class="w3-tag">unknown</span></p>
  </header>

  <!-- Search Section -->
  <div class="w3-container w3-center search-container">
    <form action="{% url 'core:posts' %}" method="get" style="display: flex; width: 100%;">
      <input type="text" class="search-input" name="q" value="{{ query }}" placeholder="Looking for somthing?...">
      <button type="submit" class="search-button w3-button w3-padding-large w3-white w3-border w3-button-custom">Search</button>
    </form>
  </div>

  <!-- Grid for blog entries -->
<div class="blog-grid">
    <!-- Blog Content -->
  {% for o in obj %}
      <div class="w3-card-4 w3-margin w3-white">
        <img src="{{ o.cover_image.url }}" alt="Nature" style="width:100%">
        <div class="w3-container">
          <h3><b>{{ o.title_heading }}</b></h3>
          <h5>{{ o.title_description }} <span class="w3-opacity">{{ o.created_at }}</span></h5>
        </div>
        <div class="w3-container">
          <p>{{ o.description| slice:"0:150" | safe }}. . . </p>
          <div class="w3-row">
            <div class="w3-col m6 s12">
              <p><a href="{% url 'core:post-detail' o.id o.slug %}" class="w3-button w3-padding-large w3-white w3-border w3-button-custom"><b>READ MORE »</b></a>
                  {% if request.user.is_superuser %}
              <a href="{% url 'core:post-creation' o.id %}" class="w3-button w3-padding-large w3-white w3-border w3-button-custom"><b>EDIT »</b></a></p>
                  {% endif %}
            </div>
            <div class="w3-col m6 w3-hide-small">
              <p>
                <span class="w3-padding-large w3-right"><b>Comments </b><span class="w3-tag">{{ o.approved_comments }}</span></span>
                <span class="w3-padding-large w3-right"><b>Likes </b><span class="w3-tag">{{ o.like_count }}</span></span>
              </p>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
</div>
</div>
</div>
{% endblock %}